#:kivy 2.0.0
#: import get_color_from_hex kivy.utils.get_color_from_hex
#:import MDFloatingActionButtonSpeedDial kivymd.uix.button.MDFloatingActionButtonSpeedDial
#: import get_color_from_hex kivy.utils.get_color_from_hex
#:import MDScreen kivymd.uix.screen.MDScreen
#:import MDProgressBar kivymd.uix.progressbar.MDProgressBar
#:import ZBarCam kivy_garden.zbarcam.ZBarCam
#:import hex kivy.utils.get_color_from_hex


<SplashScreen>:
    name: 'splash_screen'
    canvas.before:
        
        Rectangle:
            pos: self.pos
            size: self.size
            source:'images/splash.png'
        Rectangle:
            pos: self.width * 0.25, self.height * 0.3
            size: self.width * 0.5, self.height * 0.5
            source: 'images/logo1.png'
    MDScreen:
        MDFloatLayout:
            

            MDLabel:
                text: 'Loading...'
                halign: 'center'
                pos_hint: {'center_x': .5, 'center_y': .2}
                font_style: 'H5'
                theme_text_color:"Custom"
                text_color: 1, 1, 1, 1
            
<RegisterScreen>:
   
    BoxLayout:
        orientation: 'vertical'
        spacing:12
        padding:10
        canvas.before:
            Color:
                rgba:hex('#07CBFB') 
            Rectangle:
                pos: self.pos
                size: self.size
        
        BoxLayout:
            # padding: dp(20)
            # spacing: dp(20)
            size_hint_y: None
            height: dp(200)
            
            Image:
                source: 'images/logo.png'  
            
        BoxLayout:
            padding: dp(10)
            spacing: dp(10)
            orientation:'vertical'
            size_hint_y: None
            height:dp(5)
            
            MDLabel:
                text: 'User Registration'
                theme_text_color:'Custom'
                text_color:1,1,1,1
                halign: 'center'
                valign: 'center'
                font_style: 'H5'
                bold:True
        
        BoxLayout:
            padding: dp(10)
            spacing: dp(18)
            orientation: 'vertical'
            size_hint_y: None
            height: self.minimum_height
            
            MDTextField:
                id: first_name
                hint_text: 'First Name'
                # helper_text: " firstname could not be blank"
                # helper_text_mode: "on_error"
                # required: True
                line_color_normal:1,1,1,1
                mode: "fill"
                fill_color: 1, 1, 1, 1
                size_hint_y: None
                height: dp(40)
                multiline: False
           
            
            MDTextField:
                id: last_name
                hint_text: 'Last Name'
                # helper_text: " lastname could not be blank"
                # helper_text_mode: "on_error"
                # required: True
                mode: "fill"
                fill_color: 1, 1, 1, 1
                line_color_normal:1,1,1,1
                size_hint_y: None
                height: dp(40)
                multiline: False
                
            MDTextField:
                id: mobile
                hint_text: 'Phone Number'
                # helper_text: " Phone Number could not be blank"
                # helper_text_mode: "on_error"
                # required: True
                mode: "fill"
                fill_color: 1, 1, 1, 1
                line_color_normal:1,1,1,1
                size_hint_y: None
                height: dp(50)
                multiline: False
                
            MDTextField:
                id: email
                hint_text: 'Email'
                # helper_text: " Email could not be blank"
                # helper_text_mode: "on_error"
                # required: True
                mode: "fill"
                fill_color: 1, 1, 1, 1
                line_color_normal:1,1,1,1
                size_hint_y: None
                height: dp(50)
                multiline: False
                
            
            MDTextField:
                id: password
                hint_text: 'Password'
                # helper_text: " Password could not be blank"
                # helper_text_mode: "on_error"
                # required: True
                mode: "fill"
                fill_color: 1, 1, 1, 1
                line_color_normal:1,1,1,1
                password: True
                size_hint_y: None
                height: dp(50)
                multiline: False
            
        BoxLayout:
            size_hint_y: None
            height: dp(50)
            padding: dp(10)
            spacing: dp(10)
            
            MDRoundFlatButton:
                text: 'Register'
                text_color:hex('#07CBFB') 
                size_hint_x: 0.5
                md_bg_color: 1, 1, 1, 1
                on_press:root.register_user()
            
            MDRoundFlatButton:
                text: 'Login'
                text_color:hex('#07CBFB') 
                size_hint_x: 0.5
                md_bg_color: 1, 1, 1, 1
                on_press: root.manager.current = 'login'

<LoginScreen>:
    MDScreen:
        name:"login"
        MDFloatLayout:
            md_bg_color:hex('#07CBFB')
            Image:
                source:"images/logo1.png"
                pos_hint:{"center_y":0.85,"center_x":0.5}
                size_hint_x: 0.90
                size_hint_y: 0.40
            
            MDLabel:
                text: "Login Here"
                font_style:"H1"
                pos_hint:{"center_x":.5,"center_y":0.65}
                halign:"center"
                color:hex("#FFFFFF")
                font_size:"35sp"
                bold:True
            
            MDFloatLayout:
                size_hint:0.75,.085
                pos_hint:{"center_x":.5,"center_y":0.5}
                canvas:
                    Color:
                        rgb:1,1,1,1
                    RoundedRectangle:
                        size:self.size
                        pos: self.pos
                        radius:[25]
                TextInput:
                    id: email
                    hint_text:"Email"
                    size_hint:1,None
                    height:self.minimum_height
                    pos_hint:{"center_x":.5,"center_y":0.5}
                    cursor_color:0,0,0,1
                    multiline:False
                    background_color:1,1,1,0
                    foreground_color:127/255,202/255,248/255,1
                    padding:26
                    hint_text_color:195/255,195/255,195/255,1
                    
            
            MDFloatLayout:
                size_hint:0.75,.085
                pos_hint:{"center_x":.5,"center_y":0.4}
                canvas:
                    Color:
                        rgb:1,1,1,1
                    RoundedRectangle:
                        size:self.size
                        pos: self.pos
                        radius:[25]
                TextInput:
                    id: password
                    hint_text:"Password"
                    size_hint:1,None
                    height:self.minimum_height
                    pos_hint:{"center_x":.5,"center_y":0.4}
                    cursor_color:0,0,0,1
                    multiline:False
                    background_color:1,1,1,0
                    foreground_color:127/255,202/255,248/255,1
                    padding:26
                    hint_text_color:195/255,195/255,195/255,1
                    password: True


          
            Button:
                text: "Reset Password"
                size_hint:.4,.075
                font_size: sp(18)
                pos_hint:{"center_x":.5,"center_y":0.3}
                background_color:1,1,1,0
                color:1,1,1,1
                on_press: root.manager.current = 'forget_password'
                canvas.before:
                    Color:
                        rgb:hex('#07CBFB')
                    RoundedRectangle:
                        size:self.size
                        pos:self.pos
                        radius:[25]



            Button:
                text: "Login"
                color:
                size_hint:.5,.085
                font_size: sp(25)
                pos_hint:{"center_x":.5,"center_y":0.20}
                background_color:1,1,1,0
                color:127/255,202/255,248/255,1
                on_press:root.login()
                canvas.before:
                    Color:
                        rgb:1,1,1,1
                    RoundedRectangle:
                        size:self.size
                        pos:self.pos
                        radius:[25]

            

            Button:
                text: "Register here "
                font_style:"H2"
                size_hint:.4,.075
                font_size: sp(18)
                pos_hint:{"center_x":.5,"center_y":0.1}
                background_color:1,1,1,0
                color:1,1,1,1
                on_press: root.manager.current = 'register'
                canvas.before:
                    Color:
                        rgb:hex('#07CBFB')
                    RoundedRectangle:
                        size:self.size
                        pos:self.pos
                        radius:[25]


<ForgetPasswordScreen>:
    ScreenManager:
        Screen:
            name: "forget_password_screen"

            MDRelativeLayout:
                MDTopAppBar:
                    id: toolbar
                    title: "Forget Password"
                    pos_hint: {'top':1.0}
                    md_bg_color: 0, 0.7, 1, 1 
                    left_action_items: [["arrow-left", lambda *args : setattr(root.manager, "current", "login")]]


                MDTextField:
                    id: email_field
                    hint_text: "Email"
                    helper_text: "Enter your registered email address"
                    helper_text_mode: "on_focus"
                    size_hint: None, None
                    size: dp(270), dp(40)
                    pos_hint: {"center_x": 0.5, "top": 0.8}
                    on_text_validate: app.on_email_entered(self.text)

                MDRoundFlatButton:
                    text: "Submit"
                    size_hint: None, None
                    size: dp(200), dp(40)
                    pos_hint: {"center_x": 0.5, "top": 0.6}
                    on_press: root.send_reset_password_request()

<OTPScreen>:
    ScreenManager:
        Screen:
            name: "OTP_Screen"
            MDRelativeLayout:
                
                MDTopAppBar:
                    id: toolbar
                    title: "Enter 6 digit otp"
                    pos_hint: {'top':1.0}
                    md_bg_color: 0, 0.7, 1, 1 
                    left_action_items: [["arrow-left", lambda *args : setattr(root.manager, "current", "forget_password")]]
                MDTextField:
                    id: otp_field
                    hint_text: "OTP"
                    helper_text_mode: "on_focus"
                    size_hint: None, None
                    size: dp(270), dp(40)
                    pos_hint: {"center_x": 0.5, "top": 0.8}
                    
                
                MDRoundFlatButton:
                    text: "Submit"
                    size_hint: None, None
                    size: dp(200), dp(40)
                    pos_hint: {"center_x": 0.5, "top": 0.6}
                    on_press: root.send_otp_request()



<ResetPasswordScreen>:
    MDTopAppBar:
        id: toolbar
        title: "Reset Password"
        pos_hint: {'top':1.0}
        md_bg_color: 0, 0.7, 1, 1    
    FloatLayout:
        size_hint: 1, 1
        pos_hint: {'top':0.9}
        
        
        MDTextField:
            id: password_field
            hint_text: "New Password"
            helper_text_mode: "on_focus"
            size_hint_x: None
            width: 300
            pos_hint: {'center_x': 0.5, 'top': 0.85}

        MDTextField:
            id: confirm_password_field
            hint_text: "Confirm Password"
            helper_text_mode: "on_focus"
            size_hint_x: None
            width: 300
            height:100
            pos_hint: {'center_x': 0.5, 'top': 0.72}
            password: True

        MDRoundFlatButton:
            text: "Reset Password"
            font_size: "20sp"
            size_hint_x: 0.3
            pos_hint: {'center_x': 0.5, 'top': 0.55}
            on_press: root.send_passwordset_request()        


# Food Hygiene!

<BoxLayoutExample6>:
    orientation: "vertical"
    spacing: "20dp"
    Button:
        text: "Food Hygiene!"
        size: "300dp", "100dp"
        size_hint: None, None
        # x, center_x, right
        # y, center_y, top
        pos_hint: { "center_x": .50 }
    Button:
        orientation: "vertical"
        text: "Allergies Advice!"
        size: "300dp", "100dp"
        size_hint: None, None
        # x, center_x, right
        # y, center_y, top
        pos_hint: { "center_x": .5 }
    Button:
        orientation: "vertical"
        text: "Freezer Advice!"
        size: "300dp", "100dp"
        size_hint: None, None
        # x, center_x, right
        # y, center_y, top
        pos_hint: { "center_x": .5 }
    Button:
        orientation: "vertical"
        text: "Recycling Advice!"
        size: "300dp", "100dp"
        size_hint: None, None
        # x, center_x, right
        # y, center_y, top
        pos_hint: { "center_x": .5 }


 # Wakeup Screen

<BoxLayoutExample1>:
    orientation: "vertical"
    spacing: "20dp"
    Label:
        text: "Logo"
        size: "200dp", "300dp"
        size_hint: None, None
        # x, center_x, right
        # y, center_y, top
        pos_hint: { "center_x": .5 }
    Button:
        text: "Sign In"
        size: "200dp", "80dp"
        size_hint: None, None
        # x, center_x, right
        # y, center_y, top
        pos_hint: { "center_x": .5 }
        color: 0, 0, 1, 1
    Button:
        text: "New User, Sign Up"
        size: "200dp", "80dp"
        size_hint: None, None
        # x, center_x, right
        # y, center_y, top
        pos_hint: { "center_x": .5 }
        color: 0, 0, 1, 1           


<SettingsScreen>:
    
    MDScreen:

        MDNavigationLayout:
           
            MDScreenManager:
                id: screen_manager
                MDScreen:

                    MDTopAppBar:
                        id: toolbar
                        title: "App Settings"
                        elevation: 4
                        pos_hint: {"top": 1}
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
                    BoxLayout:
                        orientation: "vertical"
                        padding: dp(16)
                        spacing: dp(16)
                        MDBoxLayout:
                            orientation: "horizontal"
                           
                            MDLabel:
                                text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet, adipiscing nec, ultricies sed, dolor. Cras elementum ultrices diam. Maecenas ligula massa, varius a, semper congue, euismod non, mi. Proin porttitor, orci nec nonummy molestie, enim est eleifend mi, non fermentum diam nisl sit amet erat. Duis semper. Duis arcu massa, scelerisque vitae, consequat in, pretium a, enim. Pellentesque congue. Ut in risus volutpat libero pharetra tempor. Cras vestibulum bibendum augue. Praesent egestas leo in pede. Praesent blandit odio eu enim. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor, dignissim sit amet, adipiscing nec, ultricies sed, dolor. Cras elementum ultrices diam. Maecenas ligula massa, varius a, semper congue, euismod non, mi. Proin porttitor, orci nec nonummy molestie, enim est eleifend mi, non fermentum diam nisl sit amet erat. Duis semper. Duis arcu massa, scelerisque vitae, consequat in, pretium a, enim. Pellentesque congue. Ut in risus volutpat libero pharetra tempor. Cras vestibulum bibendum augue. Praesent egestas leo in pede. Praesent blandit odio eu enim."
                                halign: "center"
                                font_style:'Caption'
                            

            MDNavigationDrawer:
                id: nav_drawer
                radius: (0, 10, 10, 0)
                md_bg_color:app.theme_cls.primary_color
                   
                MDNavigationDrawerMenu:

                    MDNavigationDrawerHeader:
                        title: ""
                        title_color: "#87CEEB"
                        text: "Settings"
                        theme_text_color: 'Custom'
                        text_color:1,1,1,1
                        bold: True
                        spacing: "4dp"
                        padding: 0, 0, 0, "56dp"
                       
                    
                    MDTextButton:
                        text: "Home"
                        theme_text_color: 'Custom'
                        text_color:1,1,1,1
                        bold: True
                        on_press: root.manager.current = 'home'
                       
                    MDNavigationDrawerDivider:

                    MDTextButton:
                        text: "Edit Profile"
                        theme_text_color: 'Custom'
                        text_color:1,1,1,1
                        bold: True
                        on_press: root.manager.current = 'edit_profile'

                    MDNavigationDrawerDivider:

                    MDTextButton:
                        text: "Notifications"
                        theme_text_color: 'Custom'
                        text_color:1,1,1,1
                        bold: True
                        on_press: root.manager.current = 'notifications'
                    
                    MDNavigationDrawerDivider:

                    MDTextButton:
                        text: "Food Hygiene"
                        theme_text_color: 'Custom'
                        text_color:1,1,1,1
                        bold: True
                        on_press: root.manager.current = 'fridge_hygiene'
                   
                    MDNavigationDrawerDivider:

                    MDTextButton:
                        text: "Logout"
                        theme_text_color: 'Custom'
                        text_color:1,1,1,1
                        bold: True
                        on_press: root.manager.current = 'login'
                    MDNavigationDrawerDivider:

                    
<EditProfileScreen>: 
    
    MDTopAppBar:
        id: toolbar
        title: "Edit Customer Profile"
        pos_hint: {'top':1.0}
        left_action_items: [["arrow-left", lambda *args : setattr(root.manager, "current", "settings")]]

    FloatLayout:
        size_hint: 1, 1
        pos_hint: {'top':0.9}

        MDTextField:
            id: first_name_field
            hint_text: "FirstName"
            helper_text_mode: "on_focus"
            size_hint_x: 0.65
            size_hint_y: 0.10
            pos_hint: {'center_x': 0.5, 'top': 0.95}

        MDTextField:
            id: last_name_field
            hint_text: "Lastname"
            helper_text_mode: "on_focus"
            size_hint_x: 0.65
            size_hint_y: 0.10
            pos_hint: {'center_x': 0.5, 'top': 0.86}
           
        
        MDTextField:
            id: email_field
            hint_text: "Email"
            helper_text_mode: "on_focus"
            size_hint_x: 0.65
            size_hint_y: 0.10
            pos_hint: {'center_x': 0.5, 'top': 0.77}
           

        MDTextField:
            id: phone_field
            hint_text: "phone Number"
            helper_text_mode: "on_focus"
            size_hint_x: 0.65
            size_hint_y: 0.10
            pos_hint: {'center_x': 0.5, 'top': 0.66}
            
        
        
        MDRoundFlatButton:
            text: "Edit Profile"
            font_size: "20sp"
            size_hint_x: 0.4
            pos_hint: {'center_x': 0.5, 'top': 0.50}
            on_press: root.edit_profile()
            
       
        
<NotificationScreen>:
    name: 'notifications'

    BoxLayout:
        orientation: 'vertical'
    
        MDTopAppBar:
            title: 'Notifications'
            md_bg_color: app.theme_cls.primary_color
            background_palette: 'Primary'
            elevation: 10
            left_action_items: [["arrow-left", lambda *args : setattr(root.manager, "current", "settings")]]
        
        ScrollView:
            MDList:
                id: notification_list
                spacing: '12dp'
    
        MDRaisedButton:
            text: 'Clear Notifications'
            md_bg_color: app.theme_cls.primary_color
            pos_hint: {'center_x': 0.5}
            on_release: app.clear_notifications()

    
<NotificationDetails>:
    size_hint: 0.9, 0.5
    orientation: "vertical"
    padding: "12dp"
    spacing: "12dp"
    MDLabel:
        id: notification_title
        text: ""
        halign: "center"
        font_style: "Subtitle1"
    MDLabel:
        id: notification_text
        text: ""
        halign: "center"
        font_style: "Body1"

<FoodHygiene>
    name: 'food_hygiene'
    MDTopAppBar:
        id: toolbar
        title: 'Food Hygiene'
        pos_hint: {'top':1.0}
        left_action_items: [["arrow-left", lambda *args : setattr(root.manager, "current", "settings")]]
    
   
                
# <ScannerScreen>:
#     BoxLayout:
#         orientation: 'vertical'
#         ZBarCam:
#             id: qrcodecam
#         Label:
#             size_hint: None, None
#             size: self.texture_size[0], 50
            # text: ' '.join([str(symbol.data) for symbol in qrcodecam.symbols])   
          
<HomeScreen>
    BoxLayout:

        orientation: 'vertical'
        
        MDTopAppBar:
            title: 'Home Page'
            md_bg_color: app.theme_cls.primary_color
            elevation: 5
            right_action_items: [['dots-vertical', lambda *args :setattr(root.manager, "current", "FoodTrack")]]




        # size_hint:None,None

        # MDTopAppBar:
        #     title: 'Home Page'
        #     md_bg_color: app.theme_cls.primary_color
        #     elevation: 5
        #     right_action_items: [['plus', lambda x: app.add_item()], ['minus', lambda x: app.remove_item()]]
        
        BoxLayout:
            orientation: 'horizontal'
            padding:10
            # color:0,0,0,1
            
            
            GridLayout:
                cols:2
                spacing:dp(5)
                 
                BoxLayout:# fridge right
                    orientation:'vertical'
                    canvas.before:
                        
                        Color:
                            rgba: 0, 0, 0, 1  
                        Line:
                            width:  dp(5)
                            rounded_rectangle: (self.x + 1, self.y + 1, self.width - 2, self.height - 2, 30, 30)
                   
                    #Child layout
                    BoxLayout:  
                        rgba: 0, 0, 0, 1  # Black color
                        canvas.before:
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part 
                    #Child layout    
                    BoxLayout:
                        orientation: 'horizontal'
                        padding: dp(10)
                        
                        canvas.before:
                            Color:
                                rgba: 0, 0, 0, 1
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2
                        #hii
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/apple.png"
                                
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/mango.png"
                                
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/apple.png"
                                
                                
                       
                        
                    #Child layout
                    BoxLayout:  
                       
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part 
                        
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/banana.png"
                               
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/egg.png"
                               
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/butter.png"
                              
                    #Child layout
                    BoxLayout:  
                        
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part   
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/capsicums.png"
                                
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/capsicum.png"
                               
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/carrot.png"
                               

                     #Child layout
                    BoxLayout:  
                        
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part 
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/carrot.png"
                               
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/pea.png"
                               
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/spinach.png"
                                
                     #Child layout
                    BoxLayout:  
                        
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part 
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/watermelon.png"
                                
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/watermelon.png"
                                
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/watermelon.png"
                               
                    BoxLayout:  
                        
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part   
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/brinjle.png"
                             
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/lemons.png"
                               
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/potato.png"
                               
                    
                     #Child layout
                    BoxLayout:  
                        
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part  
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/cucumber.png"
                              
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/broccoli.png"
                               
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/cheese.png"
                               
                     #Child layout
                    BoxLayout:  
                        
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/grape.png"
                                
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/grapes.png"
                               
                            
                            MDIconButton
                                size_hint: 0.2, 1
                                icon: "Fridge_Images/papaya.png"
                              

                BoxLayout:#fridge left
                    orientation:'vertical'
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 1  
                        Line:
                            width: dp(5)
                            rounded_rectangle: (self.x + 1, self.y + 1, self.width - 2, self.height - 2, 30, 30)
                   
                    
                    #Child layout   
                    BoxLayout:  
                        
                        canvas.before:
                        
                            
                            Color:
                                rgba: 0, 0, 0, 1 
                            Line:
                                width: dp(5)
                                rounded_rectangle: (self.x + 1, self.y + 1, self.width - 2, self.height - 2, 30, 30)
                        
                    

                    BoxLayout:  
                        
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part
                        
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            padding:dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.5, 0.5
                                icon: "Fridge_Images/lamb.png"
                                icon_size: dp(40)
                            
                            MDIconButton
                                size_hint: 0.5, 0.5
                                icon: "Fridge_Images/meat.png"
                                icon_size: dp(40)
                               
                            
                            MDIconButton
                                size_hint: 0.5, 0.5
                                icon: "Fridge_Images/lamb.png"
                                icon_size: dp(40)
                              
                    BoxLayout:  
                        
                        canvas.before:
                        
                            Color:
                                rgba: 0, 0, 0, 1  
                            Rectangle:
                                pos: self.x, self.y
                                size: self.width, self.height * 0.2  # give color to only bottom part
                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint: 1, 0.1
                            pos_hint: {'center_y':0.5 }
                            spacing: dp(10)
                            padding:dp(10)
                            canvas:
                                Rectangle:
                                    size: self.size
                    
                            MDIconButton
                                size_hint: 0.5, 0.5
                                icon: "Fridge_Images/chicken-leg.png"
                                icon_size: dp(40)
                            
                            MDIconButton
                                size_hint: 0.5, 0.5
                                icon: "Fridge_Images/roasted-chicken.png"
                                icon_size: dp(40)
                               
                            
                            MDIconButton
                                size_hint: 0.5, 0.5
                                icon: "Fridge_Images/chicken-leg.png"
                                icon_size: dp(40)
                    
                    BoxLayout:  
                        
                       

                        GridLayout:  #111 
                            cols:2
                            
                            BoxLayout:  

                                canvas.before:
                        
                            
                                    Color:
                                        rgba: 0, 0, 0, 1 
                                    Line:
                                        width: dp(5)
                                        rounded_rectangle: (self.x + 1, self.y + 1, self.width - 2, self.height - 2, 30, 30)
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint: 1, 0.1
                                    pos_hint: {'center_y':0.5 }
                                    spacing: dp(10)
                                    padding:dp(10)
                                    canvas:
                                        Rectangle:
                                            size: self.size
                            
                                    MDIconButton
                                        size_hint: 0.5, 0.5
                                        icon: "Fridge_Images/ice-cream.png"
                                        icon_size: dp(0)
                            

                            BoxLayout:  

                                canvas.before:
                        
                            
                                    Color:
                                        rgba: 0, 0, 0, 1 
                                    Line:
                                        width: dp(5)
                                        rounded_rectangle: (self.x + 1, self.y + 1, self.width - 2, self.height - 2, 30, 30)    
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint: 1, 0.1
                                    pos_hint: {'center_y':0.5 }
                                    spacing: dp(10)
                                    padding:dp(10)
                                    canvas:
                                        Rectangle:
                                            size: self.size
                            
                                    MDIconButton
                                        size_hint: 0.5, 0.5
                                        icon: "Fridge_Images/milk-bottle.png"
                                        icon_size: dp(50)
                    
                    #Child layout
                    BoxLayout:  
                       

                        GridLayout:  #111 
                            cols:2
                            
                            BoxLayout:  

                                canvas.before:
                        
                            
                                    Color:
                                        rgba: 0, 0, 0, 1 
                                    Line:
                                        width: dp(5)
                                        rounded_rectangle: (self.x + 1, self.y + 1, self.width - 2, self.height - 2, 30, 30)
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint: 1, 0.1
                                    pos_hint: {'center_y':0.5 }
                                    spacing: dp(10)
                                    padding:dp(10)
                                    canvas:
                                        Rectangle:
                                            size: self.size
                            
                                    MDIconButton
                                        size_hint: 0.5, 0.5
                                        icon: "Fridge_Images/sauces.png"
                                        icon_size: dp(50)

                            BoxLayout:  

                                canvas.before:
                        
                            
                                    Color:
                                        rgba: 0, 0, 0, 1 
                                    Line:
                                        width: dp(5)
                                        rounded_rectangle: (self.x + 1, self.y + 1, self.width - 2, self.height - 2, 30, 30)  
                                MDBoxLayout:
                                    orientation: 'horizontal'
                                    size_hint: 1, 0.1
                                    pos_hint: {'center_y':0.5 }
                                    spacing: dp(10)
                                    padding:dp(10)
                                    canvas:
                                        Rectangle:
                                            size: self.size
                            
                                    MDIconButton
                                        size_hint: 0.5, 0.5
                                        icon: "Fridge_Images/orange.png"
                                        icon_size: dp(50)  

        MDBoxLayout:
            orientation: 'horizontal'
            size_hint: 1, 0.1
            pos_hint: {'bottom': 0}
            spacing: dp(10)
            md_bg_color:hex('#0990F9')
            canvas:
                Rectangle:
                    size: self.size
       
            MDIconButton
                size_hint: 0.3, 1
                icon: "home"
                on_release: app.root.current = 'home'
            
            MDIconButton
                size_hint: 0.3, 1
                icon: "images/sicon.png"
                on_release: app.root.current = 'settings'
            
            MDIconButton
                size_hint: 0.3, 1
                icon: "camera"
                on_release: app.root.current = 'scanner'

  

<CustomListItem>:
    OneLineListItem:
        text: root.text


<ListDialog>:
    size_hint: None, None
    size: "250dp", "250dp"

    ScrollView:
        MDList:
            id: list_content


<FoodTrack>:
    name: 'FoodTrack'
    MDTopAppBar:
        id: toolbar
        title: 'Food Tracker'
        pos_hint: {'top':1.0}
        left_action_items: [["arrow-left", lambda *args : setattr(root.manager, "current", "home")]]
    
    GridLayout:
        cols:1
        pos_hint: {'top':0.8}
        spacing:20
        padding:5


        MDRectangleFlatButton:
            font_size: "16sp"
            on_release: root.show_dialog("Red Button Clicked")
            size_hint_x: None
            md_bg_color: 255, 0, 0, 1

        MDRectangleFlatButton:
            font_size: "16sp"
            on_release: root.show_dialog("Amber Button Clicked")
            size_hint_x: None
            md_bg_color:255, 191, 0, 1

        MDRectangleFlatButton:
            font_size: "16sp"
            on_release: root.show_dialog("Green Button Clicked")
            size_hint_x: None
            pos_hint: {'center_x': 0.5}
            md_bg_color: 0, 100, 0, 1




# previous Login and Register code


# <LoginScreen>:
#     MDTopAppBar:
#         id: toolbar
#         title: "User Login"
#         pos_hint: {'top':1.0}
#         md_bg_color: 0, 0.7, 1, 1
      
#     FloatLayout:
#         size_hint: 1, 1
#         pos_hint: {'top':0.9}


#         MDIcon:
#             icon: "account"
#             halign: "center"
#             valign: "center"
#             font_size: "48sp"
#             theme_text_color: "Primary"
#             pos_hint: {'center_x': 0.5, 'top': 0.90}
            
#         MDTextField:
#             id: email_field
#             hint_text: "Email"
#             helper_text_mode: "on_focus"
#             size_hint_x: None
#             width: 400
#             pos_hint: {'center_x': 0.5, 'top': 0.75}

#         MDTextField:
#             id: password_field
#             hint_text: "Password"
#             helper_text_mode: "on_focus"
#             size_hint_x: None
#             width: 400
#             height:100
#             icon_right: "eye-off"
#             on_icon_right:root.toggle_password_visibility()
#             pos_hint: {'center_x': 0.5, 'top': 0.65}
#             password: True
        
#         MDTextButton:
#             text: "Forget Password"
#             font_size: "18sp"
#             theme_text_color: 'Custom'
#             text_color:  0, 0.7, 1, 1 
#             pos_hint: {'center_x': 0.65, 'top': 0.50}
#             on_press: root.manager.current = 'forget_password'
            
        
#         MDRoundFlatButton:
#             text: "Login"
#             font_size: "18sp"
#             size_hint_x: 0.3
#             pos_hint: {'center_x': 0.5, 'top': 0.40}
#             on_press: root.manager.current = 'home'
       
#         MDRoundFlatButton:
#             text: "Create An Account"
#             font_size: "18sp"
#             size_hint_x: 0.3
#             pos_hint: {'center_x': 0.5, 'top': 0.30}
#             on_press: root.manager.current = 'register'

# <ForgetPasswordScreen>:
#     MDTopAppBar:
#         id: toolbar
#         title: "Forget Password"
#         pos_hint: {'top':1.0}
#         md_bg_color: 0, 0.7, 1, 1 
#     FloatLayout:
#         size_hint: 1, 1
#         pos_hint: {'top':0.9}

#         MDTextField:
#             id: email_field
#             hint_text: "Enter your email here"
#             helper_text_mode: "on_focus"
#             size_hint_x: None
#             height: "48dp"
#             width: 450
#             pos_hint: {'center_x': 0.5, 'top': 0.80}              
           
# <RegisterScreen>:
#     MDTopAppBar:
#         id: toolbar
#         title: "User Registration"
#         anchor_title:"center"
#         pos_hint: {'top':1.0}
#         md_bg_color: 0, 0.7, 1, 1
        
    
#     FloatLayout:
#         size_hint: 1, 1
#         pos_hint: {'top':0.9}

#         MDTextField:
#             id: first_name_field
#             hint_text: "Firstname"
#             helper_text_mode: "on_focus"
#             size_hint_x: 0.65
#             size_hint_y: 0.10
#             pos_hint: {'center_x': 0.5, 'top': 0.99}

#         MDTextField:
#             id: last_name_field
#             hint_text: "Lastname"
#             helper_text_mode: "on_focus"
#             size_hint_x: 0.65
#             size_hint_y: 0.10
#             pos_hint: {'center_x': 0.5, 'top': 0.90}
#             password: True
        
#         MDTextField:
#             id: email_field
#             hint_text: "Email"
#             helper_text_mode: "on_focus"
#             size_hint_x: 0.65
#             size_hint_y: 0.10
#             pos_hint: {'center_x': 0.5, 'top': 0.81}
#             password: True

#         MDTextField:
#             id: password_field
#             hint_text: "Password"
#             helper_text_mode: "on_focus"
#             size_hint_x: None
#             size_hint_x: 0.65
#             size_hint_y: 0.10
#             pos_hint: {'center_x': 0.5, 'top': 0.72}
#             password: True

#         MDTextField:
#             id: confirm_password_field
#             hint_text: "Confirm Password"
#             helper_text_mode: "on_focus"
#             size_hint_x: 0.65
#             size_hint_y: 0.10
#             pos_hint: {'center_x': 0.5, 'top': 0.63}
#             password: True
        
#         MDRaisedButton:
#             id: dob_field
#             text: "Select Date of Birth"
#             size_hint_x: 0.2
#             size_hint_y: 0.01
#             pos_hint: {'center_x': 0.5, 'top': 0.51}
#             on_release: root.show_date_picker()
           

#         MDTextField:
#             id: phone_field
#             hint_text: "Phone Number"
#             helper_text_mode: "on_focus"
#             size_hint_x: 0.65
#             size_hint_y: 0.10
#             pos_hint: {'center_x': 0.5, 'top': 0.45}
#             password: True
        
#         # MDTextField:
#         #     id: clubcard_field
#         #     hint_text: "Clubcard Number"
#         #     helper_text_mode:"on_focus"
#         #     size_hint_x: None
#         #     width: 500
#         #     height:90
#         #     pos_hint: {'center_x': 0.5, 'top': 0.41}
#         #     password: True
        
#         MDRoundFlatButton:
#             text: "Register "
#             size_hint_x: None
#             width: root.width*0.4
#             pos_hint: {'center_x': 0.5, 'top': 0.30}
#             on_press: root.manager.current = 'home'
       
#         MDRoundFlatButton:
#             text: " Login here"
#             size_hint_x: None
#             width: root.width*0.4
#             size_hint_y: None
#             pos_hint: {'center_x': 0.5, 'top': 0.20}
#             on_press: root.manager.current = 'login'          
               

        









